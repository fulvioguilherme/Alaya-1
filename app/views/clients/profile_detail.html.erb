<% provide(:title, @client.first_name) %>
    <!--=== Container ===-->
    <div class="container content">
        <div class="row margin-bottom-30">
            <div class="col-md-10 col-md-offset-1 mb-margin-bottom-30">
                <% flash.each do |key, value| %>
                    <div class="alert alert-<%= key %>" role="alert">
						<%= value %>
						<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    </div>
                <% end %>

				<div id="client_edit_alert"></div>

                <div class="headline"><h2>Client Home Page</h2></div>
                
                <!-- Requests table begin -->
                <ul class="nav nav-tabs" role="tablist">
                    <li class="active"><a href="#appointments" role="tab" data-toggle="tab"><span class="glyphicon glyphicon-calendar"></span> Appointments</a></li>
                    <li class=""><a href="#edit" role="tab" data-toggle="tab"><i class="fa fa-edit"></i> Edit Info</a></li>
                    <li class=""><a href="#password" role="tab" data-toggle="tab"><i class="fa fa-lock"></i> Password</a></li>
                </ul>
                <div class="tab-content">
                    <div class="tab-pane active" id="appointments">
						<% if @client.appointments.length > 0 %>
							<h2>Your appointments</h2>
                            <table class="table table-striped table-hover">
                                <thead>
                                    <tr>
                                        <th>Provider</th>
                                        <th>Expertise</th>
                                        <th>Date &#38; Time</th>
                                        <th>Evaluate</th>
                                        <th>Reschedule</th>
                                        <th>Cancel</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <% @client.appointments.each_with_index do |appointment, index| %>
                                        <tr>
                                            <td>
												<%= link_to eval("#{appointment.provider.profile}_path") do %>
														<%= appointment.provider.first_name %> <%= appointment.provider.last_name %></td>
												<% end %>
                                            <td><%= appointment.provider.expertise %></td>
                                            <td><%= (appointment.start + 20.minutes).strftime("%H:%M:%S - %A, %B %dth, %Y") %></td>
                                            <td align="center"><a href="#"><i class="fa fa-comments-o"></i></a></td>
                                            <td align="center"><a href="javascript: reschedule(<%= appointment.id %>);"><i class="fa fa-history fa-flip-horizontal"></i></a></td>
                                            <td align="center"><a href="#"><i class="fa fa-remove"></i></a></td>
                                        </tr>
                                    <% end %>
                                </tbody>
                            </table>
                            
                            <div class="modal fade" id="reschedules_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
											<h4 class="modal-title" id="reschedules_title"></h4>
										</div>
										<div class="modal-body">
											<form action="" method="post">
												<div id="reschedules_alert"></div>
												<div id="reschedulse_modal_content"></div>
											</form>
										</div>
									</div>
								</div>
							</div>
						<% else %>
							<div class="page-header">
								<h2>You don't have any appointment scheduled.</h2>
							</div>
						<% end %>
						<div class="row">
							<div class="col-md-10 col-md-offset-1">
								<%= link_to "Schedule an appointment today!", profile_list_path, class: "btn-u pull-right" %>
							</div>
						</div>
                    </div>
                    <div class="tab-pane" id="edit">
						<br><br>
						<%= form_for(@client, url: client_update_personal_path) do |f| %>
							<div class="row margin-bottom-20">
								<div class="col-md-4 col-md-offset-2">
									<%= f.label :first_name %>
									<%= f.text_field :first_name, class: "form-control", placeholder: "First name", required: "required" %>
								</div>                
								
								<div class="col-md-4">
									<%= f.label :last_name %>
									<%= f.text_field :last_name, class: "form-control", placeholder: "Last name", required: "required" %>
								</div>                
							</div>
							
							<div class="row margin-bottom-20">
								<div class="col-md-8 col-md-offset-2">
									<%= f.label :email %>
									<%= f.text_field :email, class: "form-control", placeholder: "Email", required: "required", value: @client.email %>
								</div>                
							</div>

							<div class="row margin-bottom-20">
								<div class="col-md-8 col-md-offset-2">
									<%= f.label :address  %>
									<%= f.text_field :address, class: "form-control", placeholder: "Address" %>
								</div>                
							</div>

							<div class="row margin-bottom-20">
								<div class="col-md-4 col-md-offset-2">
									<%= f.label :phone %>
									<%= f.text_field :phone, class: "form-control", placeholder: "Phone" %>
								</div>                
								
								<div class="col-md-4">
									<%= f.label :weeks_pregnant %>
									<%= f.text_field :weeks_pregnant, class: "form-control", placeholder: "Weeks pregnant" %>
								</div>                
							</div>
							
							<div class="row margin-bottom-20">
								<div class="col-md-8 col-md-offset-2" align="center">
									<%= f.submit "Edit my information", onclick: "return validateClientUpdateInfo()", class: "btn-u" %>
								</div>                
							</div>
						<% end %>
                    </div>
                    <div class="tab-pane" id="password">
						<br><br>
						<%= form_for(@client, url: client_update_password_path) do |f| %>
							<div class="row margin-bottom-20">
								<div class="col-md-4 col-md-offset-4">
									<%= f.label :password_old %>
									<%= f.password_field :password_old, class: "form-control", placeholder: "Old password", required: "required" %>
								</div>
							</div>
						
							<div class="row margin-bottom-20">
								<div class="col-md-4 col-md-offset-4">
									<%= f.label :password %>
									<%= f.password_field :password, class: "form-control", placeholder: "New password", required: "required" %>
								</div>
							</div>
							<div class="row margin-bottom-20">
								<div class="col-md-4 col-md-offset-4">
									<%= f.label :password_confirmation, "Password confirmation" %>
									<%= f.password_field :password_confirmation, class: "form-control", placeholder: "New password confirmation", required: "required" %>
								</div>                
							</div>
							
							<div class="row margin-bottom-20">
								<div class="col-md-4 col-md-offset-4" align="center">
									<%= f.submit "Change my password", onclick: "return validateClientUpdatePassword()", class: "btn-u" %>
								</div>                
							</div>
						<% end %>
                    </div>
                </div>
                <!-- Requests table end -->
            </div>
        </div><!--/row-->        
    </div>
    <!--=== End Container ===-->
